<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KhasmShop | Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù„ÙƒÙŠ Ø§Ù„Ù…Ø·ÙˆØ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; background: #fff; margin: 0; overflow-x: hidden; }
        
        /* 1. Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ¯Ø±Ø¬Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© (Ø·Ù„Ø¨ 6) */
        .royal-bg {
            position: fixed; inset: 0; z-index: -1;
            background: linear-gradient(135deg, #ffffff 0%, #f0fff4 30%, #fff5f5 60%, #fffdf0 100%);
        }

        /* 2. Ø§Ù„Ø¥Ù†ØªØ±Ùˆ Ø§Ù„ÙØ®Ù… Ø§Ù„Ù…ØªØ­Ø±Ùƒ (Ø·Ù„Ø¨ 7) */
        #intro-overlay {
            position: fixed; inset: 0; z-index: 9999; background: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: 1.5s cubic-bezier(0.8, 0, 0.2, 1);
        }
        .intro-logo {
            font-size: 4rem; font-weight: 900; color: #fff;
            background: linear-gradient(45deg, #fff, #fbbf24, #fff);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            animation: shine 3s infinite;
        }
        @keyframes shine { 0% { opacity: 0.5; transform: scale(0.9); } 50% { opacity: 1; transform: scale(1.1); } 100% { opacity: 0.5; transform: scale(0.9); } }

        /* 3. Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„ÙØ®Ù… (Ø·Ù„Ø¨ 5) */
        .marquee-container { border-bottom: 2px solid #eee; overflow: hidden; background: #fff; }
        .m-line { white-space: nowrap; padding: 6px 0; font-size: 11px; font-weight: 900; color: #fff; }
        .m-1 { background: #16a34a; animation: scrollLeft 20s linear infinite; }
        .m-2 { background: #dc2626; animation: scrollRight 25s linear infinite; }
        .m-3 { background: #ca8a04; animation: scrollLeft 30s linear infinite; }
        @keyframes scrollLeft { from { transform: translateX(100%); } to { transform: translateX(-100%); } }
        @keyframes scrollRight { from { transform: translateX(-100%); } to { transform: translateX(100%); } }

        /* ÙƒØ±ÙˆØª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .p-card { background: white; border-radius: 25px; padding: 20px; text-align: center; border: 1px solid #f0f0f0; box-shadow: 0 10px 20px -5px rgba(0,0,0,0.05); transition: 0.3s; }
        .p-card:hover { transform: translateY(-10px); border-color: #fbbf24; }
        .glass-btn { background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); color: white; }
        
        .hidden { display: none !important; }
        .tab-active { border-bottom: 4px solid #1e40af; color: #1e40af; font-weight: 900; }
    </style>
</head>
<body>

    <div class="royal-bg"></div>

    <div id="intro-overlay">
        <div class="intro-logo italic">KHASM<span class="text-blue-500">SHOP</span></div>
        <div id="auth-box" class="mt-10 opacity-0 transition-all duration-1000 translate-y-10">
            <button onclick="login()" class="bg-white text-black px-10 py-4 rounded-2xl font-black flex items-center gap-3 shadow-2xl active:scale-95 transition">
                <img src="https://www.google.com/favicon.ico" class="w-5"> Ø³Ø¬Ù„ Ø¹Ø¨Ø± Google Play
            </button>
            <p class="text-gray-500 text-[10px] mt-4 font-bold tracking-widest uppercase">Luxury Charging Gateway</p>
        </div>
    </div>

    <div id="app" class="hidden">
        <div class="marquee-container">
            <div class="m-line m-1">ğŸ”¥ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø®ØµÙ… Ø´ÙˆØ¨ - Ø³Ø±Ø¹Ø© ÙÙŠ Ø§Ù„ØªÙ†ÙÙŠØ° ÙˆÙØ®Ø§Ù…Ø© ÙÙŠ Ø§Ù„ØªØ¹Ø§Ù…Ù„ | Ù…ØªÙˆÙØ± Ø´Ø¯Ø§Øª Ø¨Ø¨Ø¬ÙŠ ÙˆØ¬ÙˆØ§Ù‡Ø± ÙØ±ÙŠ ÙØ§ÙŠØ± ğŸ”¥</div>
            <div class="m-line m-2">âš¡ Ø§Ø´Ø­Ù† Ø§Ù„Ø¢Ù† ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø· Ù…Ù„ÙƒÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© Ù…Ø¹ ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ© Ø´Ø±Ø§Ø¡ Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹ âš¡</div>
            <div class="m-line m-3">ğŸ’ Ø¹Ø±Ø¶ Ø®Ø§Øµ: Ø§Ø³ØªØ¨Ø¯Ù„ 30 Ù†Ù‚Ø·Ø© Ø¨Ù€ 60 Ø´Ø¯Ø© Ù…Ø¬Ø§Ù†Ø§Ù‹ ÙÙˆØ±Ø§Ù‹ Ù…Ù† Ù‚Ø³Ù… Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· ğŸ’</div>
        </div>

        <header class="p-4 bg-white/70 backdrop-blur-md flex justify-between items-center sticky top-0 z-50 border-b">
            <div class="flex items-center gap-3">
                <img id="uImg" class="w-12 h-12 rounded-2xl border-2 border-yellow-500 shadow-sm">
                <div>
                    <h2 id="uName" class="font-black text-sm text-slate-800">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..</h2>
                    <p id="uID" class="text-[10px] text-blue-600 font-bold bg-blue-50 px-2 rounded italic">Ù…Ø­ÙØ¸Ø©: #------</p>
                </div>
            </div>
            <button onclick="toggleSideMenu()" class="w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center text-slate-700"><i class="fas fa-bars"></i></button>
        </header>

        <main class="max-w-md mx-auto p-4">
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-white p-4 rounded-[25px] shadow-sm border border-green-100 text-center">
                    <p class="text-[10px] font-bold text-gray-400">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªÙˆÙØ±</p>
                    <h3 id="uBal" class="text-xl font-black text-slate-800">0</h3>
                </div>
                <div class="bg-white p-4 rounded-[25px] shadow-sm border border-yellow-100 text-center">
                    <p class="text-[10px] font-bold text-gray-400">Ù†Ù‚Ø§Ø·ÙŠ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</p>
                    <h3 id="uPts" class="text-xl font-black text-yellow-600">0</h3>
                </div>
            </div>

            <div class="flex gap-6 mb-6 border-b font-black text-xs">
                <button onclick="showTab('store')" id="tab-store" class="tab-active pb-2">Ø§Ù„Ù…ØªØ¬Ø±</button>
                <button onclick="showTab('orders')" id="tab-orders" class="text-gray-400 pb-2">Ø·Ù„Ø¨Ø§ØªÙŠ</button>
                <button onclick="showTab('admin')" id="tab-admin" class="text-red-500 pb-2 hidden">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© âš™ï¸</button>
            </div>

            <div id="view-store" class="space-y-6">
                <h4 class="font-black text-slate-800 border-r-4 border-yellow-500 pr-2">Ø£Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙÙˆØ±ÙŠØ©</h4>
                <div id="grid-products" class="grid grid-cols-2 gap-4">
                    </div>

                <div class="bg-slate-900 rounded-[30px] p-6 text-white relative overflow-hidden mt-8">
                    <h4 class="font-black text-lg mb-2">Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· ğŸ’</h4>
                    <p class="text-xs opacity-70 mb-4">Ø§Ø³ØªØ¨Ø¯Ù„ Ù†Ù‚Ø§Ø·Ùƒ Ø¨Ø´Ø¯Ø§Øª Ø¨Ø¨Ø¬ÙŠ ÙÙˆØ±Ø§Ù‹</p>
                    <div class="bg-white/10 p-4 rounded-2xl flex justify-between items-center border border-white/20">
                        <span class="text-xs font-bold">60 Ø´Ø¯Ø© = 30 Ù†Ù‚Ø·Ø©</span>
                        <button onclick="redeemPoints()" class="bg-yellow-500 text-black px-4 py-2 rounded-xl font-black text-[10px]">Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø¢Ù†</button>
                    </div>
                </div>
            </div>

            <div id="view-orders" class="hidden space-y-4 pb-20">
                </div>

            <div id="view-admin" class="hidden space-y-4 pb-20">
                <h4 class="font-black text-red-600">Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ğŸ› ï¸</h4>
                <div id="admin-orders-list" class="space-y-4 text-xs"></div>
            </div>
        </main>
    </div>

    <div id="orderModal" class="fixed inset-0 z-[6000] bg-black/60 backdrop-blur-sm flex items-end justify-center hidden">
        <div class="w-full max-w-md bg-white rounded-t-[40px] p-8 animate-slide-up">
            <h3 id="modalTitle" class="font-black text-xl text-center mb-6">ØªØ£ÙƒÙŠØ¯ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø­Ù†</h3>
            <div class="space-y-4">
                <input id="gameID" type="number" placeholder="Ø£Ø¯Ø®Ù„ Ø¢ÙŠØ¯ÙŠ Ø§Ù„Ù„Ø§Ø¹Ø¨ (ID)" class="w-full bg-gray-50 p-4 rounded-2xl outline-none font-bold text-center border focus:border-blue-500">
                <input id="gameName" type="text" placeholder="Ø§Ø³Ù…Ùƒ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©" class="w-full bg-gray-50 p-4 rounded-2xl outline-none font-bold text-center border focus:border-blue-500">
                <div class="bg-blue-50 p-4 rounded-2xl text-center text-blue-800 font-bold text-xs">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: Ù…Ø­ÙØ¸Ø© Ø®ØµÙ… Ø´ÙˆØ¨</div>
                <button onclick="processOrder()" class="w-full bg-slate-900 text-white py-5 rounded-2xl font-black shadow-xl">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù† ğŸš€</button>
                <button onclick="closeModal()" class="w-full py-2 text-gray-400 font-bold text-xs">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <div id="sideMenu" class="fixed inset-y-0 right-0 w-80 bg-white z-[7000] shadow-2xl translate-x-full transition-transform duration-500 p-10">
        <button onclick="toggleSideMenu()" class="text-gray-300 text-2xl mb-10"><i class="fas fa-times-circle"></i></button>
        <h3 class="text-2xl font-black text-slate-800 mb-6 italic">Ù…Ù† Ù†Ø­Ù†ØŸ</h3>
        <p class="text-slate-500 font-bold leading-relaxed mb-10 text-sm">
            ÙÙŠ <span class="text-blue-600 italic font-black">KHASM SHOP</span>ØŒ Ù†Ø¤Ù…Ù† Ø¨Ø£Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙŠØ³ØªØ­Ù‚ ØªØ¬Ø±Ø¨Ø© Ø´Ø­Ù† ØªÙ„ÙŠÙ‚ Ø¨Ù…Ù‚Ø§Ù…Ù‡. Ù…ØªØ¬Ø±Ù†Ø§ Ù„ÙŠØ³ Ù…Ø¬Ø±Ø¯ Ù…Ù†ØµØ© Ø¨ÙŠØ¹ØŒ Ø¨Ù„ Ù‡Ùˆ Ù†Ø¸Ø§Ù… Ù…Ù„ÙƒÙŠ Ù…ØªÙƒØ§Ù…Ù„ ÙŠÙˆÙØ± Ù„Ùƒ Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø³Ø±Ø¹Ø©. Ù‡Ø°Ø§ Ù…Ù† Ø°ÙˆÙ‚Ùƒ Ø§Ù„Ø±Ø§Ù‚ÙŠ Ø§Ù„ÙØ®Ù… Ø§Ø®ØªÙŠØ§Ø±Ù†Ø§ØŒ ÙˆÙ†Ø­Ù† Ù‡Ù†Ø§ Ù„Ù†ÙƒÙˆÙ† Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¹Ù†Ø¯ Ø­Ø³Ù† Ø¸Ù†Ùƒ.
        </p>
        <button onclick="logout()" class="w-full bg-red-50 text-red-600 font-black py-4 rounded-2xl flex items-center justify-center gap-3"><i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>

    <div id="waMenu" class="fixed bottom-24 left-6 bg-white p-4 rounded-3xl shadow-2xl border border-gray-100 hidden z-[5000]">
        <p class="text-[10px] font-black text-gray-400 mb-3">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙƒÙŠÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</p>
        <button onclick="window.open('https://wa.me/249907760989')" class="w-full text-right p-3 hover:bg-gray-50 rounded-xl mb-1 flex items-center gap-2"><i class="fab fa-whatsapp text-green-500"></i> <span class="text-xs font-bold">Ù…Ø­Ù…Ø¯ ÙØªØ­ÙŠ (Ø¯Ø¹Ù…)</span></button>
        <button onclick="window.open('https://wa.me/249914178935')" class="w-full text-right p-3 hover:bg-gray-50 rounded-xl flex items-center gap-2"><i class="fab fa-whatsapp text-green-500"></i> <span class="text-xs font-bold">Ù…Ø­Ù…Ø¯ Ø§Ù„ØªØ§Ø¬ (Ø´Ø­Ù†)</span></button>
    </div>
    <button onclick="document.getElementById('waMenu').classList.toggle('hidden')" class="fixed bottom-6 left-6 bg-blue-600 text-white w-14 h-14 rounded-full flex items-center justify-center shadow-2xl text-2xl z-[5000] animate-bounce"><i class="fab fa-whatsapp"></i></button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot, updateDoc, collection, addDoc, query, where, getDocs, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = { apiKey: "AIzaSyC0jzecEwKgHpxHpTi8Y-_bwwfzVdtgf3E", authDomain: "khasmshop.firebaseapp.com", projectId: "khasmshop", storageBucket: "khasmshop.firebasestorage.app", messagingSenderId: "238182001615", appId: "1:238182001615:web:d77391030a40a481b440ba" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();
        const admins = ["mhmdfthu98@gmail.com", "mohnadyasir43@gmail.com", "muhammedaltaj111@gmail.com"];

        let uData = null;
        let selectedProduct = null;

        const products = [
            { id: 1, name: '60 Ø´Ø¯Ø© Ø¨Ø¨Ø¬ÙŠ', price: 4000, points: 2, img: 'https://www.pubgmobile.com/common/images/icon_logo.jpg' },
            { id: 2, name: '120 Ø´Ø¯Ø© Ø¨Ø¨Ø¬ÙŠ', price: 8000, points: 4, img: 'https://www.pubgmobile.com/common/images/icon_logo.jpg' },
            { id: 3, name: '325 Ø´Ø¯Ø© Ø¨Ø¨Ø¬ÙŠ', price: 18000, points: 10, img: 'https://www.pubgmobile.com/common/images/icon_logo.jpg' },
            { id: 4, name: '100 Ø¬ÙˆÙ‡Ø±Ø© ÙØ±ÙŠ ÙØ§ÙŠØ±', price: 5000, points: 3, img: 'https://img.utdstc.com/icon/403/60a/40360a87f549c490a60424a106e232144d4c5c2d36d4f7385a4982a58d60e6e7' }
        ];

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                document.getElementById('intro-overlay').style.transform = "translateY(-100%)";
                setTimeout(() => {
                    document.getElementById('app').classList.remove('hidden');
                    document.getElementById('intro-overlay').classList.add('hidden');
                }, 1000);
                await initUser(user);
            } else {
                document.getElementById('auth-box').classList.remove('opacity-0', 'translate-y-10');
            }
        });

        async function initUser(user) {
            const ref = doc(db, "users", user.uid);
            onSnapshot(ref, (snap) => {
                if (snap.exists()) {
                    uData = snap.data();
                    renderUI();
                    if (admins.includes(user.email.toLowerCase())) {
                        document.getElementById('tab-admin').classList.remove('hidden');
                        loadAdminOrders();
                    }
                } else {
                    const wid = Math.floor(100000 + Math.random() * 900000).toString();
                    setDoc(ref, { name: user.displayName, walletID: wid, balance: 0, points: 0, img: user.photoURL });
                }
            });
            loadUserOrders(user.uid);
        }

        function renderUI() {
            document.getElementById('uName').innerText = uData.name;
            document.getElementById('uImg').src = uData.img;
            document.getElementById('uID').innerText = `Ù…Ø­ÙØ¸Ø© Ø«Ø§Ø¨ØªØ©: #${uData.walletID}`;
            document.getElementById('uBal').innerText = uData.balance.toLocaleString() + " Ø¬.Ø³";
            document.getElementById('uPts').innerText = uData.points;
            
            const grid = document.getElementById('grid-products');
            grid.innerHTML = "";
            products.forEach(p => {
                grid.innerHTML += `
                    <div class="p-card">
                        <img src="${p.img}" class="w-16 h-16 mx-auto mb-4 rounded-xl shadow-md">
                        <h4 class="text-[11px] font-black mb-1">${p.name}</h4>
                        <p class="text-blue-600 font-black text-xs mb-1">${p.price.toLocaleString()} Ø¬.Ø³</p>
                        <p class="text-[9px] text-green-600 font-bold mb-4">+${p.points} Ù†Ù‚Ø·Ø©</p>
                        <button onclick="openOrderModal(${p.id})" class="w-full bg-slate-900 text-white py-2 rounded-xl text-[10px] font-black">Ø´Ø­Ù† Ø§Ù„Ø¢Ù†</button>
                    </div>`;
            });
        }

        window.openOrderModal = (id) => {
            selectedProduct = products.find(p => p.id === id);
            document.getElementById('modalTitle').innerText = selectedProduct.name;
            document.getElementById('orderModal').classList.remove('hidden');
        };

        window.processOrder = async () => {
            const id = document.getElementById('gameID').value;
            const name = document.getElementById('gameName').value;
            if (!id || !name) return alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
            if (uData.balance < selectedProduct.price) return alert("Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡ Ù„Ù„Ø´Ø­Ù†");

            const order = {
                uid: auth.currentUser.uid,
                uName: uData.name,
                walletID: uData.walletID,
                gameID: id,
                gameName: name,
                product: selectedProduct.name,
                price: selectedProduct.price,
                points: selectedProduct.points,
                status: 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°',
                date: new Date().toLocaleString('ar-EG')
            };

            await addDoc(collection(db, "orders"), order);
            await updateDoc(doc(db, "users", auth.currentUser.uid), {
                balance: increment(-selectedProduct.price),
                points: increment(selectedProduct.points)
            });

            alert("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ÙˆØ³ÙŠØªÙ… ØªÙ†ÙÙŠØ°Ù‡ ÙÙˆØ±Ø§Ù‹!");
            closeModal();
        };

        function loadUserOrders(uid) {
            const q = query(collection(db, "orders"), where("uid", "==", uid));
            onSnapshot(q, (snap) => {
                const div = document.getElementById('view-orders');
                div.innerHTML = snap.empty ? '<p class="text-center py-10 text-gray-400 font-bold">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø³Ø§Ø¨Ù‚Ø©</p>' : '';
                snap.forEach(d => {
                    const o = d.data();
                    const sColor = o.status === 'Ù…ÙƒØªÙ…Ù„' ? 'bg-green-100 text-green-600' : 'bg-blue-100 text-blue-600';
                    div.innerHTML += `
                        <div class="bg-white p-5 rounded-3xl shadow-sm border border-gray-100 flex justify-between items-center">
                            <div><h4 class="font-black text-sm">${o.product}</h4><p class="text-[9px] text-gray-400 font-bold">${o.date}</p></div>
                            <span class="text-[10px] px-3 py-1 rounded-full font-black ${sColor}">${o.status}</span>
                        </div>`;
                });
            });
        }

        function loadAdminOrders() {
            onSnapshot(collection(db, "orders"), (snap) => {
                const div = document.getElementById('admin-orders-list');
                div.innerHTML = "";
                snap.forEach(d => {
                    const o = d.data();
                    div.innerHTML += `
                        <div class="bg-white p-4 rounded-2xl border-l-4 border-red-500 shadow-sm space-y-2">
                            <p><b>Ø§Ù„Ø²Ø¨ÙˆÙ†:</b> ${o.uName} (#${o.walletID})</p>
                            <p><b>Ø§Ù„Ø·Ù„Ø¨:</b> ${o.product} | <b>ID Ø§Ù„Ù„Ø¹Ø¨Ø©:</b> ${o.gameID}</p>
                            <p><b>Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨:</b> <span class="text-blue-600 font-black">${o.status}</span></p>
                            <div class="flex gap-2">
                                <button onclick="updateStatus('${d.id}', 'Ù…ÙƒØªÙ…Ù„')" class="bg-green-500 text-white px-2 py-1 rounded">Ù…ÙƒØªÙ…Ù„</button>
                                <button onclick="updateStatus('${d.id}', 'ÙØ´Ù„')" class="bg-red-500 text-white px-2 py-1 rounded">ÙØ´Ù„</button>
                            </div>
                        </div>`;
                });
            });
        }

        window.updateStatus = async (id, s) => { await updateDoc(doc(db, "orders", id), { status: s }); alert("ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« âœ…"); };

        window.showTab = (t) => {
            ['store', 'orders', 'admin'].forEach(x => { document.getElementById('view-'+x).classList.add('hidden'); document.getElementById('tab-'+x).classList.remove('tab-active'); document.getElementById('tab-'+x).classList.add('text-gray-400'); });
            document.getElementById('view-'+t).classList.remove('hidden');
            document.getElementById('tab-'+t).classList.add('tab-active');
            document.getElementById('tab-'+t).classList.remove('text-gray-400');
        };

        window.login = () => signInWithPopup(auth, provider);
        window.logout = () => signOut(auth).then(() => location.reload());
        window.toggleSideMenu = () => document.getElementById('sideMenu').classList.toggle('translate-x-full');
        window.closeModal = () => document.getElementById('orderModal').classList.add('hidden');
    </script>
</body>
                    </html>
