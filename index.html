<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ø®ØµÙ… | KHASM SHOP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #050505; color: white; margin: 0; }
        .bg-gradient-custom { background: linear-gradient(135deg, #dc2626 0%, #16a34a 100%); }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .admin-panel { display: none; border: 2px solid #dc2626; background: rgba(220, 38, 38, 0.05); }
        .marquee { overflow: hidden; white-space: nowrap; background: #dc2626; color: white; padding: 5px 0; font-weight: bold; font-size: 14px; }
        .marquee-content { display: inline-block; animation: marquee 20s linear infinite; }
        @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
        .whatsapp-float { position: fixed; bottom: 20px; left: 20px; background: #25d366; color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 1000; transition: 0.3s; }
        .whatsapp-float:hover { transform: scale(1.1); }
    </style>
</head>
<body>

    <div class="marquee">
        <div class="marquee-content">
             ğŸš€ Ø´Ø­Ù† ÙÙˆØ±ÙŠ Ø®Ù„Ø§Ù„ 5 Ø¯Ù‚Ø§Ø¦Ù‚ ÙÙ‚Ø· â€” âœ… Ù†Ø¶Ù…Ù† Ù„Ùƒ Ø£Ù‚Ù„ Ø³Ø¹Ø± ÙÙŠ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† â€” ğŸ’³ Ù…ØªÙˆÙØ± Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø¨Ù†ÙƒÙƒ Ùˆ Ù…Ø§ÙŠ ÙƒØ§Ø´ÙŠ â€” ğŸ‘‘ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ø®ØµÙ… ØªØ±Ø­Ø¨ Ø¨ÙƒÙ…
        </div>
    </div>

    <header class="text-center py-10 bg-gradient-custom rounded-b-[3rem] shadow-2xl shadow-red-900/20">
        <h1 class="text-5xl font-black text-white tracking-tighter italic uppercase drop-shadow-lg">KHASM SHOP</h1>
        <p class="text-white/80 mt-2 font-bold tracking-widest text-sm">Ø£Ù‚ÙˆÙ‰ Ù…ØªØ¬Ø± Ø´Ø­Ù† ÙÙŠ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† ğŸ‡¸ğŸ‡©</p>
    </header>

    <div class="flex justify-center gap-4 mt-[-25px]">
        <div class="bg-white text-blue-800 px-4 py-2 rounded-xl font-black shadow-lg text-sm border-2 border-blue-100">Ø¨Ù€Ù†Ù€ÙƒÙ€Ùƒ ğŸ’³</div>
        <div class="bg-yellow-400 text-black px-4 py-2 rounded-xl font-black shadow-lg text-sm border-2 border-yellow-500">Ù…Ø§ÙŠ ÙƒØ§Ø´ÙŠ ğŸ’°</div>
    </div>

    <main class="p-4 mt-6">
        <div id="adminPanel" class="admin-panel glass p-6 rounded-[2rem] mb-10 max-w-2xl mx-auto shadow-2xl">
            <h2 class="text-red-500 font-black mb-6 text-center text-xl">Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…ØªØ¬Ø± ğŸ‘‘</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input id="ucAmount" type="number" placeholder="ÙƒÙ…ÙŠØ© Ø§Ù„Ù€ UC" class="w-full p-4 rounded-2xl bg-black border border-gray-800 text-white outline-none focus:border-green-500">
                <input id="ucPrice" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡" class="w-full p-4 rounded-2xl bg-black border border-gray-800 text-white outline-none focus:border-red-500">
            </div>
            <button onclick="addProduct()" class="w-full bg-gradient-custom text-white font-black py-4 mt-6 rounded-2xl shadow-xl hover:opacity-90 transition">Ù†Ù€Ø´Ù€Ø± Ø§Ù„Ù€Ø¹Ø±Ø¶ Ø§Ù„Ø¢Ù† âœ…</button>
        </div>

        <div id="loginSection" class="text-center py-12 glass rounded-[3rem] max-w-md mx-auto">
            <h3 class="text-2xl font-black mb-6 italic">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø´Ø­Ù†</h3>
            <button onclick="login()" class="bg-white text-black font-black py-4 px-10 rounded-2xl shadow-xl hover:bg-gray-100 transition flex items-center justify-center mx-auto gap-3">
                <img src="https://www.google.com/favicon.ico" class="w-5 h-5"> Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø¬ÙˆØ¬Ù„
            </button>
        </div>

        <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto pb-20">
            </div>
    </main>

    <a href="https://wa.me/249916581517" class="whatsapp-float">
        <svg fill="currentColor" width="35" height="35" viewBox="0 0 24 24"><path d="M12.031 6.172c-2.32 0-4.519.903-6.16 2.544-3.399 3.4-3.4 8.923-.002 12.321l1.157 1.155L5.65 26l3.997-1.013 1.174.677c1.666.96 3.545 1.468 5.426 1.468 6.137 0 11.129-4.992 11.129-11.129 0-2.97-1.157-5.763-3.257-7.863-2.102-2.1-4.896-3.257-7.867-3.257m0 2.193c2.383 0 4.623.928 6.308 2.612 1.685 1.685 2.612 3.925 2.612 6.308 0 4.927-4.007 8.935-8.935 8.935-1.503 0-2.984-.377-4.304-1.088l-.309-.166-2.368.601.611-2.302-.181-.291c-.754-1.21-1.152-2.612-1.152-4.053 0-4.354 3.542-7.9 7.9-7.9 1.103 0 2.179.223 3.178.653l-.83 1.916c-.732-.315-1.523-.478-2.348-.478-3.143 0-5.707 2.564-5.707 5.707 0 1.25.402 2.455 1.161 3.456l.241.315-.407 1.535 1.571-.399.324.192c1.002.593 2.149.907 3.321.907 3.658 0 6.635-2.977 6.635-6.635 0-1.771-.69-3.435-1.942-4.688s-2.917-1.942-4.688-1.942c-1.328 0-2.585.385-3.649 1.104l-1.221-1.826c1.428-.968 3.123-1.488 4.887-1.488z"/></svg>
    </a>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC0jzecEwKgHpxHpTi8Y-_bwwfzVdtgf3E",
            authDomain: "khasmshop.firebaseapp.com",
            databaseURL: "https://khasmshop-default-rtdb.firebaseio.com",
            projectId: "khasmshop",
            storageBucket: "khasmshop.firebasestorage.app",
            messagingSenderId: "238182001615",
            appId: "1:238182001615:web:4c7ddea335df2111b440ba"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        const ADMIN_EMAIL = "mhmdfthu98@gmail.com";

        window.login = () => { signInWithPopup(auth, provider); };

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById('loginSection').style.display = 'none';
                if (user.email === ADMIN_EMAIL) document.getElementById('adminPanel').style.display = 'block';
            }
        });

        window.addProduct = () => {
            const uc = document.getElementById('ucAmount').value;
            const price = document.getElementById('ucPrice').value;
            if (uc && price) {
                push(ref(db, 'products'), { uc, price });
                alert("ØªÙ… Ø§Ù„Ù†Ø´Ø± ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø±! ğŸ”¥");
            }
        };

        onValue(ref(db, 'products'), (snapshot) => {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            snapshot.forEach((child) => {
                const data = child.val();
                grid.innerHTML += `
                    <div class="glass p-6 rounded-[2.5rem] text-center relative border-b-4 border-green-600 shadow-xl">
                        <div class="bg-red-600 text-white text-[10px] font-black px-4 py-1 rounded-full absolute top-4 right-4 italic shadow-lg">OFFER</div>
                        <h3 class="text-5xl font-black mb-1 italic text-white">${data.uc}<span class="text-sm text-green-500 ml-1">UC</span></h3>
                        <p class="text-2xl text-gray-300 mb-6 font-bold tracking-widest">${data.price} <span class="text-xs">Ø¬.Ø³</span></p>
                        <input type="number" id="id-${child.key}" placeholder="ID Ø§Ù„Ù„Ø§Ø¹Ø¨" class="w-full p-4 mb-4 rounded-2xl bg-black border border-white/10 text-center font-bold focus:border-green-600 outline-none">
                        <button onclick="orderNow('${data.uc}', '${data.price}', '${child.key}')" class="w-full bg-green-600 hover:bg-white hover:text-green-700 py-4 rounded-2xl font-black text-xl transition-all shadow-xl">Ø´Ù€Ø­Ù€Ù† ÙÙ€ÙˆØ±ÙŠ âš¡</button>
                        ${auth.currentUser?.email === ADMIN_EMAIL ? `<button onclick="deleteItem('${child.key}')" class="mt-4 text-[10px] text-red-500 block mx-auto underline italic">Ø­Ø°Ù Ø§Ù„Ø¹Ø±Ø¶</button>` : ''}
                    </div>
                `;
            });
        });

        window.deleteItem = (key) => { if(confirm('Ø­Ø°ÙØŸ')) remove(ref(db, `products/${key}`)); };

        window.orderNow = (uc, price, key) => {
            const id = document.getElementById(`id-${key}`).value;
            if (!id) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ù€ ID!");
            const msg = `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ± Ø§Ù„Ø®ØµÙ…ØŒ Ø£Ø±ÙŠØ¯ Ø´Ø­Ù† ${uc} Ø´Ø¯Ø© Ù„Ù„Ù€ ID: ${id}. Ø§Ù„Ø³Ø¹Ø±: ${price} Ø¬.Ø³. Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± (Ø¨Ù†ÙƒÙƒ/Ù…Ø§ÙŠ ÙƒØ§Ø´ÙŠ)`;
            window.open(`https://wa.me/249916581517?text=${encodeURIComponent(msg)}`);
        };
    </script>
</body>
</html>
