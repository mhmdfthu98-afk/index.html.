<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KhasmShop | Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…Ù„ÙƒÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; background: #f0f2f5; margin: 0; }
        
        /* Ø§Ù†ØªØ±Ùˆ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ÙØ®Ù… */
        #intro { position: fixed; inset: 0; z-index: 9999; background: #000; display: flex; align-items: center; justify-content: center; transition: 1s; }
        .logo-gold { font-size: 3rem; font-weight: 900; color: #fff; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„Ù…ØªØ­Ø±Ùƒ */
        .marquee-container { background: #fff; border-bottom: 2px solid #ddd; overflow: hidden; }
        .m-line { white-space: nowrap; display: block; padding: 6px 0; font-size: 11px; font-weight: 900; animation: scroll 20s linear infinite; }
        @keyframes scroll { from { transform: translateX(100%); } to { transform: translateX(-100%); } }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± ÙˆØ§Ù„Ø¨Ù†Ø±Ø§Øª (Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø©) */
        .main-slider { background: linear-gradient(45deg, #5a189a, #7b2cbf); border-radius: 25px; height: 160px; display: flex; align-items: center; padding: 20px; color: white; position: relative; margin: 15px; box-shadow: 0 10px 20px rgba(90, 24, 154, 0.2); }
        .banner-stats { display: flex; justify-content: space-around; background: #5a189a; margin: 10px 15px; padding: 12px; border-radius: 15px; color: white; font-size: 10px; }
        
        /* ÙƒØ±ÙˆØª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
        .p-card { background: #fff; border-radius: 20px; padding: 15px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.02); border: 1px solid #eee; transition: 0.3s; }
        .p-card:hover { transform: translateY(-5px); border-color: #5a189a; }
        .p-img { width: 70px; height: 70px; margin: 0 auto 10px; object-fit: contain; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="intro">
        <div class="logo-gold italic">KHASM<span class="text-blue-500">SHOP</span></div>
    </div>

    <div class="marquee-container">
        <div class="m-line text-blue-600">ğŸ”¥ Ø´Ø­Ù† ÙÙˆØ±ÙŠ ÙˆØ¢Ù…Ù† | Ù…ØªÙˆÙØ± Ø´Ø¯Ø§Øª Ø¨Ø¨Ø¬ÙŠ ÙˆØ¬ÙˆØ§Ù‡Ø± ÙØ±ÙŠ ÙØ§ÙŠØ± | Ø§Ø´Ø­Ù† Ù…Ø­ÙØ¸ØªÙƒ Ø§Ù„Ø¢Ù† ÙˆØ§Ø³ØªÙ…ØªØ¹ ğŸ”¥</div>
        <div class="m-line text-red-600" style="animation-duration: 15s; animation-direction: reverse;">âš¡ Ø®ØµÙˆÙ…Ø§Øª Ø§Ù„Ø±ØªØ¨ Ù…ÙØ¹Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ | Ø±ØªØ¨Ø© ÙØ¶ÙŠØ©ØŒ Ø°Ù‡Ø¨ÙŠØ©ØŒ Ø¨Ù„Ø§ØªÙŠÙ†ÙŠØ©ØŒ ÙˆÙ…Ø§Ø³ÙŠØ© âš¡</div>
        <div class="m-line text-green-600" style="animation-duration: 25s;">ğŸ’ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù„ÙƒÙŠ: Ø§Ø³ØªØ¨Ø¯Ù„ Ù†Ù‚Ø§Ø·Ùƒ Ø¨Ø´Ø¯Ø§Øª Ù…Ø¬Ø§Ù†ÙŠØ© | ÙƒÙ„ 30 Ù†Ù‚Ø·Ø© = 60 Ø´Ø¯Ø© ğŸ’</div>
    </div>

    <div id="authBox" class="fixed inset-0 z-[5000] bg-white flex items-center justify-center p-6 hidden">
        <div class="w-full max-w-sm p-10 text-center glass shadow-2xl rounded-[40px] border border-gray-100">
            <h1 class="text-4xl font-black text-slate-900 mb-4 italic">Ø¯Ø®ÙˆÙ„ <span class="text-blue-600">Ù…Ù„ÙƒÙŠ</span></h1>
            <p class="text-gray-400 font-bold mb-10 text-sm">ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„ØªØ«Ø¨ÙŠØª Ø±Ù‚Ù… Ù…Ø­ÙØ¸ØªÙƒ</p>
            <button onclick="login()" class="w-full bg-slate-900 text-white p-5 rounded-2xl font-black flex items-center justify-center gap-3 active:scale-95 transition shadow-xl">
                <img src="https://www.google.com/favicon.ico" class="w-6"> Ø³Ø¬Ù„ Ø¹Ø¨Ø± Ù‚ÙˆÙ‚Ù„ Ø¨Ù„Ø§ÙŠ
            </button>
        </div>
    </div>

    <div id="app" class="hidden">
        <header class="p-4 bg-white flex justify-between items-center sticky top-0 z-50 shadow-sm">
            <div class="flex items-center gap-3">
                <img id="uImg" class="w-12 h-12 rounded-2xl border-2 border-blue-500 shadow-md">
                <div>
                    <p id="uName" class="font-black text-slate-800 text-sm">--</p>
                    <p id="uID" class="text-[10px] text-blue-600 font-bold bg-blue-50 px-2 rounded">Ù…Ø­ÙØ¸Ø©: #000000</p>
                </div>
            </div>
            <button onclick="logout()" class="text-red-500 text-xl p-2"><i class="fas fa-power-off"></i></button>
        </header>

        <main class="max-w-md mx-auto">
            <div class="main-slider">
                <div class="flex-1">
                    <h2 class="text-xl font-black mb-1">Ø§Ø´Ø­Ù† Ù…Ø­ÙØ¸ØªÙƒ Ø§Ù„Ø¢Ù†</h2>
                    <p class="text-[10px] opacity-90">Ø¯Ø¹Ù… ÙÙ†ÙŠ Ø³Ø±ÙŠØ¹ | Ø´Ø­Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠ 24/7</p>
                    <button onclick="openWA()" class="mt-3 bg-yellow-400 text-slate-900 px-4 py-1.5 rounded-full text-[10px] font-black shadow-lg">ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙˆÙƒÙ„Ø§Ø¡</button>
                </div>
                <i class="fas fa-crown text-6xl opacity-20 absolute left-4"></i>
            </div>

            <div class="banner-stats">
                <div class="text-center"><i class="fas fa-wallet mb-1 text-yellow-400"></i><p>Ø±ØµÙŠØ¯Ùƒ: <span id="uBal">0</span></p></div>
                <div class="text-center"><i class="fas fa-star mb-1 text-blue-400"></i><p>Ù†Ù‚Ø§Ø·Ùƒ: <span id="uPts">0</span></p></div>
                <div class="text-center"><i class="fas fa-medal mb-1 text-green-400"></i><p id="uRank">Ø¨Ø±ÙˆÙ†Ø²ÙŠ</p></div>
            </div>

            <div class="px-4">
                <h3 class="font-black text-slate-800 mb-4 flex items-center gap-2">
                    <span class="w-2 h-6 bg-blue-600 rounded-full"></span> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ø§Ù‹
                </h3>

                <div id="grid" class="grid grid-cols-2 gap-4 pb-24">
                    </div>
            </div>
        </main>
    </div>

    <a href="https://wa.me/249907760989" class="fixed bottom-6 left-6 bg-green-500 text-white w-14 h-14 rounded-full flex items-center justify-center shadow-2xl text-2xl z-[1000] animate-bounce">
        <i class="fab fa-whatsapp"></i>
    </a>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = { apiKey: "AIzaSyC0jzecEwKgHpxHpTi8Y-_bwwfzVdtgf3E", authDomain: "khasmshop.firebaseapp.com", projectId: "khasmshop", storageBucket: "khasmshop.firebasestorage.app", messagingSenderId: "238182001615", appId: "1:238182001615:web:d77391030a40a481b440ba" };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const prov = new GoogleAuthProvider();

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (ÙƒØ§Ù…Ù„Ø©)
        const products = [
            { id:1, name:'60 Ø´Ø¯Ø© Ø¨Ø¨Ø¬ÙŠ', price:4000, img:'https://www.pubgmobile.com/common/images/icon_logo.jpg' },
            { id:2, name:'325 Ø´Ø¯Ø© Ø¨Ø¨Ø¬ÙŠ', price:20000, img:'https://www.pubgmobile.com/common/images/icon_logo.jpg' },
            { id:3, name:'660 Ø´Ø¯Ø© Ø¨Ø¨Ø¬ÙŠ', price:40000, img:'https://www.pubgmobile.com/common/images/icon_logo.jpg' },
            { id:4, name:'100 Ø¬ÙˆØ§Ù‡Ø± ÙØ±ÙŠ ÙØ§ÙŠØ±', price:5000, img:'https://img.utdstc.com/icon/403/60a/40360a87f549c490a60424a106e232144d4c5c2d36d4f7385a4982a58d60e6e7' },
            { id:5, name:'Ø´Ø­Ù† ØªÙŠÙƒ ØªÙˆÙƒ ÙÙˆØ±ÙŠ', price:8000, img:'https://cdn-icons-png.flaticon.com/512/3046/3046121.png' },
            { id:6, name:'Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ø±Ø§ÙŠÙ… Ø´Ù‡Ø±', price:4500, img:'https://cdn-icons-png.flaticon.com/512/3054/3054452.png' }
        ];

        onAuthStateChanged(auth, async (user) => {
            setTimeout(() => {
                document.getElementById('intro').style.display = 'none';
                if (user) {
                    document.getElementById('authBox').classList.add('hidden');
                    document.getElementById('app').classList.remove('hidden');
                    handleUser(user);
                } else {
                    document.getElementById('authBox').classList.remove('hidden');
                }
            }, 3000);
        });

        async function handleUser(user) {
            const ref = doc(db, "users", user.uid);
            let snap = await getDoc(ref);
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ØŒ Ø£Ù†Ø´Ø¦ Ù„Ù‡ Ù…Ø­ÙØ¸Ø© Ø«Ø§Ø¨ØªØ©
            if (!snap.exists()) {
                const wid = Math.floor(100000 + Math.random() * 900000).toString();
                await setDoc(ref, { name:user.displayName, email:user.email, walletID:wid, balance:0, points:0, totalUC:0, img:user.photoURL });
            }

            // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø© ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø§Ø´Ø±
            onSnapshot(ref, (d) => {
                const data = d.data();
                document.getElementById('uName').innerText = data.name;
                document.getElementById('uImg').src = data.img;
                document.getElementById('uID').innerText = `Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø«Ø§Ø¨ØªØ©: #${data.walletID}`;
                document.getElementById('uBal').innerText = data.balance.toLocaleString();
                document.getElementById('uPts').innerText = data.points;
                renderProducts();
            });
        }

        function renderProducts() {
            const g = document.getElementById('grid');
            g.innerHTML = "";
            products.forEach(p => {
                g.innerHTML += `
                    <div class="p-card">
                        <img src="${p.img}" class="p-img">
                        <h4 class="font-black text-[11px] text-slate-800 mb-2">${p.name}</h4>
                        <p class="text-blue-600 font-black text-sm mb-3">${p.price.toLocaleString()} Ø¬.Ø³</p>
                        <button onclick="alert('Ø³ÙŠØªÙ… ÙØªØ­ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´Ø­Ù†..')" class="w-full bg-slate-900 text-white py-2 rounded-xl text-[10px] font-bold">Ø·Ù„Ø¨ Ø´Ø­Ù†</button>
                    </div>`;
            });
        }

        window.login = () => signInWithPopup(auth, prov);
        window.logout = () => signOut(auth).then(() => location.reload());
        window.openWA = () => window.open('https://wa.me/249907760989');
    </script>
</body>
    </html>

