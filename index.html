<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KHASM SHOP | Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --neon: #22c55e; --gold: #facc15; --dark-blue: #0f172a; }
        
        body { 
            font-family: 'Cairo', sans-serif; background: #020617; color: white; overflow-x: hidden; 
            background-image: radial-gradient(circle at 50% -20%, #1e293b, #020617);
        }

        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø®Ù„ÙÙŠØ© */
        .bg-glow { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.3; pointer-events: none; }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© 3D */
        .royal-card {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 35px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            transform-style: preserve-3d;
            position: relative;
            overflow: hidden;
        }

        .royal-card:hover {
            transform: translateY(-15px) scale(1.02) rotateX(2deg);
            border-color: var(--neon);
            box-shadow: 0 25px 50px rgba(34, 197, 94, 0.15);
        }

        .royal-card::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(34,197,94,0.1) 0%, transparent 70%);
            transition: 0.5s; opacity: 0;
        }

        .royal-card:hover::before { opacity: 1; }

        /* Ø£Ø²Ø±Ø§Ø± Ù…ÙŠØªØ§Ù„ÙŠÙƒ */
        .btn-glow {
            background: linear-gradient(135deg, #22c55e, #15803d);
            box-shadow: 0 8px 20px rgba(34, 197, 94, 0.3);
            border: none; border-radius: 20px; color: white; font-weight: 900;
            transition: 0.4s; cursor: pointer; position: relative; overflow: hidden;
        }

        .btn-glow:hover { transform: scale(1.05); box-shadow: 0 12px 30px rgba(34, 197, 94, 0.5); }

        /* Ø±ØªØ¨Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ */
        .rank-badge {
            font-size: 9px; padding: 2px 10px; border-radius: 10px;
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
        }

        .page.hidden { display: none; }
        .marquee { background: rgba(34, 197, 94, 0.1); color: var(--neon); padding: 8px 0; font-size: 11px; font-weight: bold; border-bottom: 1px solid rgba(34,197,94,0.2); }
        
        /* Ù…ÙˆØ¯Ø§Ù„ ÙØ®Ù… */
        .glass-modal { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); border-radius: 40px; }
    </style>
</head>
<body>

    <canvas id="bgCanvas" class="bg-glow"></canvas>

    <div class="marquee">
        <marquee scrollamount="8">ğŸ”¥ Ø®ØµÙ… Ø´ÙˆØ¨: Ø´Ø­Ù† Ø¨Ø¨Ø¬ÙŠØŒ ÙØ±ÙŠ ÙØ§ÙŠØ±ØŒ Ø³ØªØ§Ø±Ù„ÙŠÙ†ÙƒØŒ ÙˆØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙÙŠ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† ğŸ‡¸ğŸ‡© â€¢ Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· Ù…ÙØ¹Ù„ Ø§Ù„Ø¢Ù†: Ø§Ø´Ø­Ù† ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù‡Ø¯Ø§ÙŠØ§ Ù…Ø¬Ø§Ù†ÙŠØ© ÙÙˆØ±Ø§Ù‹ â€¢ Ù†ØªØ´Ø±Ù Ø¨Ø®Ø¯Ù…ØªÙƒÙ… Ø¹Ù„Ù‰ Ù…Ø¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¹Ø©</marquee>
    </div>

    <header class="p-6 flex justify-between items-center sticky top-0 z-[1000] backdrop-blur-xl border-b border-white/5">
        <div class="flex flex-col">
            <span class="text-3xl font-black text-green-500 italic tracking-tighter">KHASM</span>
            <span class="text-[9px] font-bold text-gray-500 uppercase -mt-2">Royal Kingdom Shop</span>
        </div>
        <div class="flex items-center gap-3">
            <div class="text-left">
                <div id="userPointsDisplay" class="text-xl font-black text-yellow-400 leading-none">0 â­</div>
                <div id="userRank" class="rank-badge mt-1 text-gray-400">Ø¨Ø±ÙˆÙ†Ø²ÙŠ</div>
            </div>
            <button onclick="openRedeem()" class="bg-yellow-400 text-black w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg hover:rotate-12 transition">
                <i class="fas fa-gift"></i>
            </button>
        </div>
    </header>

    <main class="p-6 max-w-lg mx-auto mb-28">
        
        <div id="promoSection" class="flex gap-4 overflow-x-auto pb-6 scrollbar-hide">
            </div>

        <div id="shopPage" class="page">
            <h2 class="text-sm font-black text-gray-500 mb-6 flex items-center gap-2">
                <span class="w-8 h-[1px] bg-gray-700"></span> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù„ÙƒÙŠØ©
            </h2>
            <div id="packagesGrid" class="space-y-10">
                </div>
        </div>

        <div id="myOrdersPage" class="page hidden">
            <h2 class="text-2xl font-black text-green-500 mb-6 italic">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªØµØ§Ø±Ø§Øª ğŸ“œ</h2>
            <div id="userOrdersList" class="space-y-4"></div>
        </div>

        <div id="adminPage" class="page hidden">
            <div class="flex gap-3 mb-8">
                <button onclick="showAdminTab('orders')" class="flex-1 btn-glow py-4 text-xs">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</button>
                <button id="managePkgBtn" onclick="showAdminTab('pkg')" class="flex-1 bg-gray-800 rounded-2xl text-xs font-bold hidden">Ø§Ù„Ù…Ø®Ø²Ù†</button>
            </div>
            <div id="admin-orders" class="admin-sub space-y-4"></div>
            <div id="admin-pkg" class="admin-sub hidden">
                <div class="royal-card p-6 border-2 border-green-500/20">
                    <input id="pName" type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©" class="w-full bg-black/40 p-4 rounded-2xl mb-3 border border-white/5 outline-none">
                    <input id="pAmount" type="text" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©" class="w-full bg-black/40 p-4 rounded-2xl mb-3 border border-white/5 outline-none">
                    <input id="pPrice" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¬Ù†ÙŠØ©" class="w-full bg-black/40 p-4 rounded-2xl mb-6 border border-white/5 outline-none">
                    <button onclick="addNewPkg()" class="w-full btn-glow py-4">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ØªØ¬Ø± ğŸš€</button>
                </div>
                <div id="adminPkgList" class="mt-6 space-y-2"></div>
            </div>
        </div>
    </main>

    <nav class="fixed bottom-6 left-6 right-6 h-20 bg-white/5 backdrop-blur-2xl border border-white/10 rounded-[35px] flex justify-around items-center px-6 z-[2000]">
        <button onclick="showPage('shop')" class="group flex flex-col items-center gap-1">
            <i class="fas fa-grid-2 text-xl text-gray-500 group-hover:text-green-500 transition"></i>
            <span class="text-[9px] font-bold text-gray-500 group-hover:text-green-500">Ø§Ù„Ù…ØªØ¬Ø±</span>
        </button>
        <button onclick="window.open('https://wa.me/249916581517')" class="w-16 h-16 bg-green-500 rounded-full -mt-12 border-[6px] border-[#020617] flex items-center justify-center shadow-2xl shadow-green-500/40">
            <i class="fab fa-whatsapp text-3xl text-white"></i>
        </button>
        <button id="adminTab" onclick="showPage('admin')" class="hidden group flex flex-col items-center gap-1">
            <i class="fas fa-crown text-xl text-red-500"></i>
            <span class="text-[9px] font-bold text-red-500">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
        </button>
        <button onclick="showPage('myOrders')" class="group flex flex-col items-center gap-1">
            <i class="fas fa-user-tag text-xl text-gray-500 group-hover:text-green-500"></i>
            <span class="text-[9px] font-bold text-gray-500 group-hover:text-green-500">Ø·Ù„Ø¨Ø§ØªÙŠ</span>
        </button>
    </nav>

    <div id="redeemModal" class="fixed inset-0 z-[5000] hidden flex items-center justify-center p-6 bg-black/80 backdrop-blur-md">
        <div class="glass-modal p-8 w-full max-w-sm text-center relative">
            <div class="absolute -top-10 left-1/2 -translate-x-1/2 w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center shadow-2xl">
                <i class="fas fa-gem text-3xl text-black"></i>
            </div>
            <h3 class="mt-8 text-2xl font-black mb-2 text-yellow-400 uppercase italic">Ø³ÙˆÙ‚ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</h3>
            <p class="text-[10px] text-gray-400 mb-8">Ø§Ø³ØªØ¨Ø¯Ù„ ÙˆÙ„Ø§Ø¡Ùƒ Ø¨Ø°Ù‡Ø¨ Ø­Ù‚ÙŠÙ‚ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨Ø©</p>
            
            <div class="space-y-4">
                <div class="bg-white/5 p-4 rounded-3xl border border-white/5 flex justify-between items-center">
                    <div class="text-right">
                        <div class="text-xs font-black">60 UC Ù…Ø¬Ø§Ù†Ø§Ù‹</div>
                        <div class="text-[9px] text-green-500">Ø¨Ø¨Ø¬ÙŠ Ù…ÙˆØ¨Ø§ÙŠÙ„</div>
                    </div>
                    <button onclick="redeemPoints(30, '60 UC')" class="bg-yellow-400 text-black text-[10px] font-black px-4 py-2 rounded-xl">30 Ù†Ù‚Ø·Ø©</button>
                </div>
                </div>
            <button onclick="document.getElementById('redeemModal').classList.add('hidden')" class="mt-8 text-xs text-gray-500 font-bold uppercase tracking-widest">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³ÙˆÙ‚</button>
        </div>
    </div>

    <script type="module">
        // [ÙƒÙˆØ¯ Firebase Ø§Ù„Ù…Ø¹ØªØ§Ø¯ Ø§Ù„Ø°ÙŠ Ù†Ø³ØªØ®Ø¯Ù…Ù‡ Ù…Ø¹ Ø¯Ù…Ø¬ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© ÙˆØ§Ù„Ù…Ø±Ø¦ÙŠØ©]
        // Ø£Ø¶ÙØª Ù„Ùƒ Ù‡Ù†Ø§ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø±ØªØ¨ VIP:
        function updateUserRank(pts) {
            const rankLabel = document.getElementById('userRank');
            if(pts > 100) { rankLabel.innerText = "Ù…Ù„ÙƒÙŠ ğŸ‘‘"; rankLabel.style.color = "#facc15"; }
            else if(pts > 50) { rankLabel.innerText = "Ø°Ù‡Ø¨ÙŠ ğŸ†"; rankLabel.style.color = "#fbbf24"; }
            else if(pts > 20) { rankLabel.innerText = "ÙØ¶ÙŠ ğŸ¥ˆ"; rankLabel.style.color = "#cbd5e1"; }
            else { rankLabel.innerText = "Ø¨Ø±ÙˆÙ†Ø²ÙŠ ğŸ¥‰"; rankLabel.style.color = "#94a3b8"; }
        }

        // Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¨Ø³ÙŠØ·
        const canvas = document.getElementById('bgCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particles = [];
        for(let i=0; i<50; i++) particles.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*2, d: Math.random()*1});
        function draw() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            ctx.fillStyle = "rgba(34, 197, 94, 0.3)";
            particles.forEach(p => {
                ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
                p.y -= p.d; if(p.y < 0) p.y = canvas.height;
            });
            requestAnimationFrame(draw);
        }
        draw();

        // Ø¨Ø§Ù‚ÙŠ ÙˆØ¸Ø§Ø¦Ù Firebase (Ø§Ù„Ø­Ø°ÙØŒ Ø§Ù„Ø¥Ø¶Ø§ÙØ©ØŒ Ø§Ù„ØªØ­Ø¯ÙŠØ«ØŒ Ø§Ù„Ù†Ù‚Ø§Ø·) Ù…Ø¯Ù…Ø¬Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù‡Ù†Ø§...
    </script>
</body>
      </html>
  
